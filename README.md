# é«˜å¹¶å‘å•†å“é™æ—¶ç§’æ€ç³»ç»Ÿ

åç«¯æŠ€æœ¯æ ˆï¼š

- ğŸ˜„SpringBoot + MyBatisï¼šåŸºæœ¬æ¡†æ¶
- :books:MySQLï¼šç”¨æˆ·ï¼Œå•†å“å’Œè®¢å•ä¿¡æ¯çš„æŒä¹…åŒ–å­˜å‚¨
- â¤Redisï¼šå‡å°‘æ•°æ®åº“çš„è®¿é—®é‡ï¼Œæé«˜è¿è¡Œæ•ˆç‡
- :walking:RabbitMQï¼šå®ç°ç”¨æˆ·çš„å¼‚æ­¥ç§’æ€ä¸‹å•

## æ•°æ®åº“è®¾è®¡

![image](https://github.com/shendefeng/Picture/main/img/A5B94DA2096F6F7125447963E76073AD.png)

ç¬¦åˆæ•°æ®åº“ä¸‰å¤§èŒƒå¼ï¼šå­—æ®µåŸå­æ€§ã€éä¸»é”®åˆ—å®Œå…¨ä¾èµ–ä¸»é”®åˆ—

## ç”¨æˆ·ç™»å½•æ¨¡å—

### å¯†ç åŠŸèƒ½

#### ä¸¤æ¬¡MD5åŠ ç›åŠ å¯†

ç”¨æˆ·è¾“å…¥åˆ°åç«¯ï¼Œä»¥åŠä»åç«¯åˆ°æ•°æ®åº“å®ç°ä¸¤æ¬¡çš„åŠ å¯†

å¥½å¤„ï¼š

1. ç¬¬ä¸€æ¬¡ä½œç”¨ï¼šé˜²æ­¢ç”¨æˆ·æ˜æ–‡å¯†ç åœ¨ç½‘ç»œè¿›è¡Œä¼ è¾“
2. ç¬¬äºŒæ¬¡ä½œç”¨ï¼šé˜²æ­¢æ•°æ®åº“è¢«ç›—ï¼Œé¿å…é€šè¿‡MD5åæ¨å‡ºå¯†ç ï¼ŒåŒé‡ä¿é™©

### ç™»å½•éªŒè¯

ä½¿ç”¨JSR303è‡ªå®šä¹‰æ ¡éªŒå™¨ï¼Œå®ç°å¯¹ç”¨æˆ·è´¦å·ã€å¯†ç çš„éªŒè¯ï¼Œä½¿å¾—éªŒè¯é€»è¾‘ä»ä¸šåŠ¡ä»£ç ä¸­è„±ç¦»å‡ºæ¥ã€‚

### ç”¨æˆ·çŠ¶æ€å­˜å‚¨

æŠ€æœ¯æ ˆï¼šRedisâ¤ + Session + ThreadLocal + æ‹¦æˆªå™¨

è§£å†³HTTPæ— çŠ¶æ€é—®é¢˜å’Œå®ç°æ‹¦æˆªå™¨åŠŸèƒ½ã€‚

## ç§’æ€æ¨¡å—

ğŸ‘¾ğŸ‘¾ğŸ‘¾ç‰¹ç‚¹ï¼šå¤šè¡¨æ“ä½œ+é«˜å¹¶å‘+å¤šäº‹åŠ¡+å¤§æµé‡â­â­â­ã€

### å®ç°æ­¥éª¤

ç³»ç»Ÿåˆå§‹åŒ–æ—¶ï¼Œå°†ç§’æ€å•†å“åº“å­˜åŠ è½½åˆ°Redisä¸­

æ”¶åˆ°è¯·æ±‚ï¼Œåœ¨Redisä¸­é¢„å‡åº“å­˜ï¼Œåº“å­˜ä¸è¶³æ—¶ï¼Œç›´æ¥è¿”å›ç§’æ€å¤±è´¥ã€‚

> - ä½¿ç”¨Redisæ˜¯ä¸ºäº†å‡å°‘æ•°æ®åº“è®¿é—®é‡ï¼Œä½†æ˜¯ä¸ºäº†è¿›ä¸€æ­¥å‡å°‘Redisçš„è®¿é—®é‡ä½¿ç”¨å†…å­˜æ ‡è®°(ç¼“å­˜å®ç°)ã€‚

ç§’æ€æˆåŠŸï¼Œå°†è®¢å•å‹å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿”å›å‰ç«¯æ¶ˆæ¯"æ’é˜Ÿä¸­"ï¼Œå®ç°å¼‚æ­¥å¤„ç†ã€‚

> - é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œæµé‡å‰Šå³°ï¼Œå¹³ç¼“åœ°å¤„ç†ä¸€ä¸ªä¸ªè¯·æ±‚ã€‚

åˆ¤æ–­æ˜¯å¦æ»¡è¶³ç§’æ€åŠŸèƒ½ï¼Œæ¶ˆæ¯å‡ºé˜Ÿï¼Œç”Ÿæˆè®¢å•ï¼Œå‡å°‘åº“å­˜

å®¢æˆ·ç«¯åœ¨ä»¥ä¸Šè¿‡ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°†ä¸€ç›´è½®è¯¢æ˜¯å¦ç§’æ€æˆåŠŸ

### å…³é”®é—®é¢˜

â­è¶…å–ï¼šæ•°æ®åº“çš„æ‚²è§‚é” + æ¶ˆæ¯é˜Ÿåˆ—

â­ä¸€äººä¸€å•ï¼šæ•°æ®åº“å”¯ä¸€ç´¢å¼• + Redisé¢„å‡ + mysql å’Œ redis æ•°æ®ä¸€è‡´æ€§

## å®‰å…¨æ¨¡å—

`seckill/doSeckill`æ¥å£æ˜¯é«˜æµé‡çš„ï¼Œéœ€è¦å¯¹å…¶æµé‡é™åˆ¶ã€‚

### éªŒè¯ç 

é€šè¿‡`EasyCaptcha`ç”Ÿæˆå›¾å½¢éªŒè¯ç å­˜å…¥Redisä¸­ï¼Œå¿…é¡»é€šè¿‡éªŒè¯ç éªŒè¯æ‰èƒ½åŠ¨æ€è¿”å›åœ°å€ã€‚

### åŠ¨æ€ç§’æ€åœ°å€

å®ç°`seckill/+{path}+/doSeckill`ï¼Œå°†`path`å­˜å…¥Redisä¸­ã€‚

### æ¥å£é˜²åˆ·

ä½¿ç”¨è®¡æ•°å™¨å®ç°é˜²åˆ·åŠŸèƒ½ã€‚åé¢ä½¿ç”¨RateLimiterä»¤ç‰Œæ¡¶ç®—æ³•ä¼˜åŒ–ã€‚

## æ¥å£æ–‡æ¡£

https://apifox.com/apidoc/shared-7d0cf69f-3a14-4b82-8832-6fba6181a964

## TODO

- [ ] æ”¯ä»˜æœåŠ¡

- [ ] åˆ†å¸ƒå¼é”

- [ ] åˆ†å¸ƒå¼æœåŠ¡

## å‚è€ƒèµ„æ–™
https://github.com/qiurunze123/miaosha/blob/master/old.md

https://github.com/qiurunze123/miaosha/blob/master/docs/code-solve.md

https://github.com/zaiyunduan123/springboot-seckill

https://github.com/Goinggoinggoing/seckill-study

https://github.com/Grootzz/seckill/tree/master

https://osjobs.net/system/posts/spike-system/

https://github.com/hfbin/Seckill


